<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="theme-color" content="#000">
    <title>refinance</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://unpkg.com/htmx.org@1.6.1"></script>
</head>

<body class="{% block body_class %}{% endblock %}">
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    {% for message in messages %}
    <div class="message">{{ message }}</div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    <nav>
        <ul>
            {% if g.actor_entity %}
            <li><a href="{{ url_for('index.index') }}">Refinance</a></li>
            <li {% if 'transaction' in request.url_rule.endpoint %} class="active" {% endif %}>
                <a href="{{ url_for('transaction.list') }}">Transaction</a>
            </li>
            <li {% if 'invoice' in request.url_rule.endpoint %} class="active" {% endif %}>
                <a href="{{ url_for('invoice.list') }}">Invoice</a>
            </li>
            {# <li {% if 'deposit' in request.url_rule.endpoint %} class="active" {% endif %}>
                <a href="{{ url_for('deposit.list') }}">Deposit</a>
            </li> #}
            <li {% if request.url_rule.endpoint.startswith('fee.') %} class="active" {% endif %}>
                <a href="{{ url_for('fee.index') }}">Fee</a>
            </li>
            <li {% if 'split' in request.url_rule.endpoint %} class="active" {% endif %}>
                <a href="{{ url_for('split.list') }}">Split</a>
            </li>
            <li {% if 'exchange' in request.url_rule.endpoint %} class="active" {% endif %}>
                <a href="{{ url_for('exchange.index') }}">Exchange</a>
            </li>
            <li {% if 'stats' in request.url_rule.endpoint %} class="active" {% endif %}>
                <a href="{{ url_for('stats.index') }}">Stats</a>
            </li>
            <li {% if 'treasury' in request.url_rule.endpoint %} class="active" {% endif %}>
                <a href="{{ url_for('treasury.list') }}">Treasury</a>
            </li>
            <li {% if 'entity' in request.url_rule.endpoint %} class="active" {% endif %}>
                <a href="{{ url_for('entity.list') }}">Entity</a>
            </li>
            <li {% if 'tag' in request.url_rule.endpoint %} class="active" {% endif %}>
                <a href="{{ url_for('tag.list') }}">Tag</a>
            </li>

            <li class="user">

                {% for currency,value in g.actor_entity_balance["completed"].items() %}
                <a href="{{ url_for('entity.detail', id=g.actor_entity.id) }}" {% if value | float < 0 %}
                    class="amount-negative" {% endif %}>{{ value }} {{ currency |
                    upper}}</a>
                {% endfor %}
                <a href="{{ url_for('entity.detail', id=g.actor_entity.id) }}"><strong
                        class="{% if not g.actor_entity.active %}secondary inactive{% endif %}">{{ g.actor_entity.name
                        }}</strong></a>
                <a href="{{ url_for('auth.logout') }}">Log out</a>
            </li>
            {% else %}
            <li><a href="/">Refinance</a></li>
            <li class="user"><a href="{{ url_for('auth.logout') }}">Logout</a></li>
            {% endif %}
        </ul>
    </nav>

    <main>
        <h1>{% block title %}{% endblock title %}</h1>
        {% block content %}
        {% endblock content %}
    </main>

    <script src="/static/js/dateToggle.js"></script>
</body>

</html>