{% extends 'base.jinja2' %}

{% block title %}Pay to Fridge{% endblock %}

{% block content %}
<div class="deposit-topup-layout shortcut-form-container">
    <section class="deposit-topup-card">
        <form method="post" class="deposit-topup-form">
            <input type="hidden" name="from_entity_id" value="{{ g.actor_entity.id }}">
            <input type="hidden" name="to_entity_id" value="{{ fridge_entity_id }}">

            <div class="form-group">
                <label class="form-label" for="fee_preset">Preset</label>
                <select id="fee_preset" name="fee_preset" class="form-input">
                    {% for preset in preset_options %}
                    <option value="{{ preset.value }}">{{ preset.label }}</option>
                    {% endfor %}
                    <option value="custom">Custom</option>
                </select>
            </div>

            <div class="deposit-row" id="custom_row" style="display: none;">
                <div class="deposit-field deposit-field-amount">
                    <label class="form-label" for="custom_amount">Custom Amount</label>
                    <input id="custom_amount" name="custom_amount" class="form-input" type="number" step="0.01"
                        placeholder="5.00">
                </div>

                <div class="deposit-field deposit-field-currency">
                    <label class="form-label" for="custom_currency">Custom Currency</label>
                    <select id="custom_currency" name="custom_currency" class="form-input">
                        <option value="GEL" selected>GEL</option>
                        <option value="USD">USD</option>
                        <option value="EUR">EUR</option>
                    </select>
                </div>
            </div>

            <div class="deposit-topup-actions">
                <button type="submit" class="big-button">Pay</button>
            </div>
        </form>
    </section>
</div>

<img src="{{ url_for('static', filename='/images/transaction/shortcuts/fridge.jpg') }}" alt="Fridge Payment Diagram"
    style="max-width: 25rem">

<script>
    const fridgePreset = document.querySelector('select[name="fee_preset"]');
    const customRow = document.getElementById('custom_row');

    const updateCustomRows = () => {
        const isCustom = fridgePreset.value === 'custom';
        customRow.style.display = isCustom ? '' : 'none';
    };

    fridgePreset.addEventListener('change', updateCustomRows);
    updateCustomRows();
</script>
{% endblock %}