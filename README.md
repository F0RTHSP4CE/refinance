# refinance
![logo](docs/refinance-logo.jpg)

refined financial system for a hackerspace. simple by design.

## architecture

### entity
anything that can send or receive money: human, donate-box, rent, utility.

### transaction
move X from A to B. supports all currencies.
- non-confirmed
- confirmed

### balance
sum of all transactions. both confirmed and not. separated.

### tags
mark entities and transactions for quick search.

## security
`X-Token` header is used for authentication.

token will be sent to `telegram_id` of an entity. newly generated tokens do not revoke old ones.

you may request a new token any time: with `name`, `id` or `telegram_id` of your entity — anything you remember.

> token — [jwt](http://jwt.io) with entity id & timestamp inside. basically it's a server-signed & verifiable json, base64'd.

## run
```console
docker compose up
```
http://localhost:8000/docs

## develop
```console
pipenv install --dev
pipenv shell

mkdir data
pytest
uvicorn refinance.app:app --reload
```

## todo
- [x] base classes
- [x] errors
- [x] unit tests
- [x] complex search
- [x] pagination
- [x] tags
- [x] transactions
- [x] balances
- [x] date range search
- [ ] recurrent payments
- [ ] migrations (not alembic?)
- [ ] logging
- [x] docker
- [ ] grafana, statistics
- [x] authentication? (basic api key list)
- [ ] permissions?

## tests notice
tests are mostly autogenerated by llm, given the route and schema. human review would be beneficial. 

## license
MIT
